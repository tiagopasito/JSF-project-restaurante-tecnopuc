package br.com.dbserver.restaurante.votacao;

import static org.junit.Assert.assertEquals;

import java.time.LocalDate;

import org.junit.Before;
import org.junit.Test;

import br.com.dbserver.restaurante.modelo.Restaurante;
import br.com.dbserver.restaurante.modelo.Usuario;

public class VotacaoTest {

	Usuario usuario1;
	Usuario usuario2;
	Usuario usuario3;
	
	Restaurante restaurante1;
	Restaurante restaurante2;
	Restaurante restaurante3;
	
	LocalDate diaAtual;
	
	@Before
	public void criaUsuarios(){
		
		this.diaAtual = LocalDate.now();
		
		this.usuario1 = new Usuario("joao@dbserver.com", "joao");
		this.usuario2 = new Usuario("jose@dbserver.com", "jose");
		this.usuario3 = new Usuario("maria@dbserver.com", "maria");
		
		this.restaurante1 = new Restaurante("Panorama", 1l);
		this.restaurante2 = new Restaurante("Vitoria", 2l);
		this.restaurante1 = new Restaurante("Palatus", 3l);
	}
	
	@Test
	public void seNaoHouveVotoListaDeVotosEstaVazia(){
		
		assertEquals(0, Votacao.getlistaDeVotos().size());
	}
	
	@Test
	public void seHouveUmVotoListaDeVotosTemUmVoto(){		
		
		usuario1.vota(restaurante1);
		
		for(int i = 0; i <  Votacao.getlistaDeVotos().size(); i++){
			
			String email = Votacao.getlistaDeVotos().get(i).getUsuario().getEmail();
			LocalDate dia = Votacao.getlistaDeVotos().get(i).getDia(); 
			System.out.println(email + " ," + dia);
		}
		
		assertEquals(1, Votacao.getlistaDeVotos().size());
	}

	@Test
	public void seHouveDoisVotosListaDeVotosTemDoisVotos(){		
		
		usuario3.vota(restaurante1);
		usuario2.vota(restaurante1);
		
		for(int i = 0; i <  Votacao.getlistaDeVotos().size(); i++){
			
			String email = Votacao.getlistaDeVotos().get(i).getUsuario().getEmail();
			LocalDate dia = Votacao.getlistaDeVotos().get(i).getDia(); 
			//System.out.println(email + " ," + dia);
		}
		
		assertEquals(2, Votacao.getlistaDeVotos().size());
	}
	
	/*@Test
	public void seUsuarioNaoVotouHojePodeVotarHoje(){
		
		
		String emailAtual = this.usuario3.getEmail();
		
		for(int i = 0; i <  Votacao.getlistaDeVotos().size(); i++){
			
			String email = Votacao.getlistaDeVotos().get(i).getUsuario().getEmail();
			LocalDate dia = Votacao.getlistaDeVotos().get(i).getDia(); 
			
		    assertEquals(false, emailAtual.equals(email) && diaAtual.equals(dia));
		}
	} 

	//@Test
	public void seUsuarioJaVotouHojeNaoPodeMaisVotarHoje(){

		String emailAtual = this.usuario1.getEmail();
		
		for(int i = 0; i <  Votacao.getlistaDeVotos().size(); i++){
			
			String email = Votacao.getlistaDeVotos().get(i).getUsuario().getEmail();
			LocalDate dia = Votacao.getlistaDeVotos().get(i).getDia(); 
			
		    assertEquals(true, emailAtual.equals(email) && diaAtual.equals(dia));
		}
	}*/
}
